# 主机选项说明

主机选项包括主机帐户选项和主机配置选项。

## 主机帐户选项说明

|选项|描述|
|--|--|
|**协议**|SYSDEF代表运维人员可以选择任意协议对主机进行运维。|
|**登录模式**|自动登录和手工登录。|
|**自动登录**|将正确的主机帐号和密码录入运维审计系统，运维人员以后就不需要输入帐户和密码即可成功登录到目标主机进行运维操作。|
|**手动登录**|无需设置主机的帐户和密码，留空即可；运维人员登录目标主机时需要输入主机的帐户和密码才能登录成功。|
|**验证**|如需验证主机的帐户和密码是否正确，请单击**验证**。 -   提示**验证成功**代表帐户和密码正确。
-   提示**验证失败**代表帐户或密码错误。
-   提示**验证超时**代表网络或协议不通。 |

|选项|描述|
|--|--|
|**协议**|SYSDEF代表运维人员可以选择任意协议对主机进行运维。|
|**登录模式**|自动登录、自动登录（二次登录）和手工登录。|
|**自动登录**|将正确的主机帐号和密码录入运维审计系统，运维人员以后就不需要输入帐户和密码即可成功登录到目标主机进行运维操作。|
|**自动登录（二次登录）**|用于管理2种帐户自动跳转登录，如交换机既有远程帐户又有enable命令；如果需要自动登录到enable权限下，就必须采用这种登录模式。|
|**手动登录**|无需设置主机的帐户和密码，留空即可；运维人员登录目标主机时需要输入主机的帐户和密码才能登录成功。|
|**验证**|如需验证主机的帐户和密码是否正确，请单击**验证**。 -   提示**验证成功**代表帐户和密码正确。
-   提示**验证失败**代表帐户或密码错误。
-   提示**验证超时**代表网络或协议不通。 |

|选项|描述|
|--|--|
|**协议**|SYSDEF代表运维人员可以选择任意协议对主机进行运维。|
|**登录模式**|自动登录、自动登录（二次登录）和手工登录。|
|**自动登录**|将正确的主机帐号和密码录入运维审计系统，运维人员以后就不需要输入帐户和密码即可成功登录到目标主机进行运维操作。|
|**自动登录（二次登录）**|用于管理2种帐户自动跳转登录，如交换机既有远程帐户又有enable命令；如果需要自动登录到enable权限下，就必须采用这种登录模式。|
|**手动登录**|无需设置主机的帐户和密码，留空即可；运维人员登录目标主机时需要输入主机的帐户和密码才能登录成功。|
|**验证**|如需验证主机的帐户和密码是否正确，请单击**验证**。 -   提示**验证成功**代表帐户和密码正确。
-   提示**验证失败**代表帐户或密码错误。
-   提示**验证超时**代表网络或协议不通。 |

|选项|描述|
|--|--|
|**协议**|SYSDEF代表运维人员可以选择任意协议对主机进行运维。|
|**登录模式**|仅支持自动登录。|
|**自动登录**|将正确的主机帐号和密码录入运维审计系统，运维人员以后无需再输入帐户和密码即可成功登录到目标主机进行运维操作。|
|**验证**|如需验证主机的账户和密码是否正确，请单击**验证**。 -   提示**验证成功**代表帐户和密码正确。
-   提示**验证失败**代表帐户或密码错误。
-   提示**验证超时**代表网络或协议不通。 |

|选项|描述|
|--|--|
|**协议**|SYSDEF代表运维人员可以选择任意协议对主机进行运维。|
|**登录模式**|自动登录和手工登录。|
|**自动登录**|将正确的主机帐号（**X:帐户名**）和密码录入运维审计系统，运维人员以后就不需要输入帐户和密码即可成功登录到目标主机进行运维操作。|
|**手动登录**|须设置帐户名称**X:root**（X表示桌面号，从0开始）、密码留空即可；运维人员登录目标主机时需要输入VNC主机的密码才能登录成功。|
|**X:root**|表示VNC的帐户。如果VNC服务器只启用了一个5900端口，那就是**0:root**；如果VNC服务器同时启用了8个桌面号（即5901~5908），那就是**1:root-8:root**。

如果主机是unix类平台，则帐户名称的格式为**X:帐户名**（X表示桌面号，从0开始）。

如果主机是windows平台，则帐户名称的格式为**X:root**（X表示桌面号，从0开始），目前仅支持VNC服务端的**VNC password**模式。

**X**是为了实现VNC服务会启动多个桌面，且用户之间互不干扰地使用各自的桌面；所以VNC服务使用的端口号与桌面号相关，VNC服务使用的端口从**5900**开始，例如桌面号是**1**，则使用的端口是**5901**；桌面号是**2**，则使用的端口是**5902**，依次类推；基于Java的VNC客户程序Web服务端口从**5800**开始，它也与桌面号相关。 |
|**验证**|如需验证主机的账户和密码是否正确，请单击**验证**。 -   提示**验证成功**代表帐户和密码正确。
-   提示**验证失败**代表帐户或密码错误。
-   提示**验证超时**代表网络或协议不通。 |

|选项|描述|
|--|--|
|**协议**|SYSDEF代表运维人员可以选择任意协议对主机进行运维。|
|**登录模式**|自动登录和手工登录。|
|**自动登录**|将正确的主机帐号和密码录入运维审计系统，运维人员以后就不需要输入帐户和密码即可成功登录到目标主机进行运维操作。|
|**手动登录**|无需设置主机的帐户和密码，留空即可；运维人员登录目标主机时需要输入主机的帐户和密码才能登录成功。|
|**验证**|如需验证主机的账户和密码是否正确，请单击**验证**。 -   提示**验证成功**代表帐户和密码正确。
-   提示**验证失败**代表帐户或密码错误。
-   提示**验证超时**代表网络或协议不通。 |

## 主机配置选项说明

|选项|功能|解释|
|--|--|--|
|**会话选项**|开启会话二次审批|登录主机时，需要管理员对此次登录行为进行审核后，才可登录。|
|开启会话备注|登录主机时需要写明登录主机的原因或目的才可登录，便于事后审计。|
|开启历史会话审计|表示允许堡垒机对运维会话内容进行审计，关闭后会产生会话记录，但没有具体内容。|
|开启实时会话监控|表示管理员可以对主机进行实时监控，关闭后管理员可看到实时会话记录，但无法得知会话内容。|
|**RDP选项**|启用键盘记录|表示记录RDP主机的键盘符操作记录。|
|允许打印机或驱动器映射|在运维RDP主机时，可以映射本地打印和本地磁盘。|
|允许使用剪切板下载|表示运维RDP主机时，可以使用复制-粘贴功能从主机下载。|
|允许使用剪贴板上传|表示运维RDP主机时，可以使用复制-粘贴功能上传至主机。|
|**SSH选项**|允许X11转发|表示在运维时可以通过SSH方式转发X11协议。|
|允许打开SFTP通道|表示在运维时可以使用SSH的客户工具直接打开SFTP协议。|
|允许请求exec|表示可以直接使用exec指令。|
|禁止文件上传|表示可以禁止通过sftp、scp、rzsz命令进行文件上传。|
|禁止文件下载|表示可以禁止通过sftp、scp、rzsz命令进行文件下载。|
|禁止文件删除|表示可以禁止通过sftp进行文件删除操作。|
|禁止重命名|表示可以禁止通过sftp进行重命名操作。|
|禁止目录创建|表示可以禁止通过sftp进行目录创建操作。|
|禁止目录删除|表示可以禁止通过sftp进行目录删除操作。|
|**文件审计**|生成文件SHA1|表示可以对SFTP传输的文件进行sha1签名，确保文件的唯一性与不重复。|
|保存文件|表示可以对SFTP传输的文件进行保存在运维审计系统中，审计时可下载下来对文件内容进行审计，查看是否有违规文件。|
|保存下载文件|表示可以保存下载的文件。|
|保存上传文件|表示可以保存上传的文件。|
|启用文件压缩|表示可以对传输的文件进行压缩，节省堡垒机空间。|
|不保存超过多少KB的文件|表示可以根据单个文件的大小进行保存。|
|单个会话保存的文件总大小超过多少MB时停止保存|表示可以控制单个会话保存的文件大小。|

